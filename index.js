"use strict";var gulp=require("gulp"),grunseq=new function(){function n(){}function r(n){for(var r=0;r<h.length;r++)if(h[r].runner===n)return h[r];return null}function t(n){for(var r=0;r<h.length;r++){var t=h[r];if(t.runner.seq.indexOf(n)>=0)return t}return null}function u(n){return n in y}function i(n){for(var r=n.runner.seq,t=0;t<r.length;t++)y[r[t]]=!0}function e(n){var r=h.indexOf(n);r>=0&&h.splice(r,1)}function o(n){return 0===Object.keys(n).length}function f(n){return 0===n.length||"function"!=typeof n[n.length-1]?d:n.pop()}function l(){var r=Array.prototype.slice.call(arguments),t=f(r),u=new n,i=r,e={runner:u,tasks:i,running:{},callback:t};h.push(e),c(e)}function c(n){if(0===n.tasks.length)return e(n),void(null!=n.callback&&n.callback());var r=n.tasks.shift();Array.isArray(r)||(r=[r]);for(var t=[],o=0;o<r.length;o++){var f=r[o];u(f)||(t.push(f),n.running[f]={})}return 0===t.length?void c(n):(i(n),gulp.start.apply(n.runner,t),void i(n))}function a(n,t,u){var i=r(n);null!=i&&t in i.running&&o(i.running[t])&&(delete i.running[t],"function"==typeof u&&u(!0),o(i.running)&&c(i))}function g(n,t,u){var i=r(n);if(null!=i){var e=f(u);if(t in i.running)for(var o=i.running[t],l=0;l<u.length;l++)o[u[l]]=e}}function s(n,t,u,i){var e=r(n);if(null!=e&&t in e.running){var f=d;u in e.running[t]&&(f=e.running[t][u],delete e.running[t][u]),o(e.running[t])&&delete e.running[t],null!=i&&i(!0),o(e.running)&&(f(!0),c(e))}}function v(n,r){var t=function(t){a(n,r,t)};return t.with=function(n){return function(){t(n)}},t.wait=function(){var u=Array.prototype.slice.call(arguments);return g(n,r,u),t},t.notify=function(u,i){return s(n,r,u,i),t},t.notifier=function(u,i){return function(){return s(n,r,u,i),t}},t}function p(n){var r=t(n);return null!=r?new v(r.runner,n):w}this.start=l,this.ender=p;var h=[],y={};n.prototype=gulp;var d=function(){},w=new function(){function n(n,t){return null!=t&&t(!1),r}var r=function(n){"function"==typeof n&&n(!1)};return r.with=function(n){return function(){r(n)}},r.wait=function(){var n=Array.prototype.slice.call(arguments),t=f(n);return t(!1),r},r.notify=n,r.notifier=function(r,t){return function(){return n(r,t)}},r}};module.exports=grunseq;