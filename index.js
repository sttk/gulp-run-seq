"use strict";var gulp=require("gulp"),grunseq=new function(){function n(){}function r(n){for(var r=0;r<f.length;r++)if(f[r].runner===n)return f[r];return null}function t(n){for(var r=0;r<f.length;r++){var t=f[r];if(t.runner.seq.indexOf(n)>=0)return t}return null}function u(n){var r=f.indexOf(n);r>=0&&f.splice(r,1)}function e(n){return 0===Object.keys(n).length}function i(){var r=Array.prototype.slice.call(arguments),t=null;r.length>0&&"function"==typeof r[r.length-1]&&(t=r.pop());var u=new n,e=r,i={runner:u,tasks:e,running:{},callback:t};f.push(i),l(i)}function l(n){if(0===n.tasks.length)return u(n),void(null!=n.callback&&n.callback());var r=n.tasks.shift();Array.isArray(r)||(r=[r]);for(var e=[],i=0;i<r.length;i++){var l=r[i];null==t(l)&&(e.push(l),n.running[l]={})}gulp.start.apply(n.runner,e)}function a(n,t){var u=function(u){var i=r(n);null!=i&&t in i.running&&e(i.running[t])&&(delete i.running[t],"function"==typeof u&&u(!0),e(i.running)&&l(i))};return u.wait=function(){var e=r(n);if(null!=e){var i=Array.prototype.slice.call(arguments),l=c;if(i.length>0&&"function"==typeof i[i.length-1]&&(l=i.pop()),t in e.running){for(var a=e.running[t],o=0;o<i.length;o++)a[i[o]]=l;return u}}},u.notify=function(i,a){var o=r(n);if(null!=o&&t in o.running){var f=c;return i in o.running[t]&&(f=o.running[t][i],delete o.running[t][i]),e(o.running[t])&&delete o.running[t],null!=a&&a(!0),e(o.running)&&(f(!0),l(o)),u}},u}function o(n){var r=t(n);return null!=r?new a(r.runner,n):g}this.start=i,this.ender=o;var f=[];n.prototype=gulp;var c=function(){},g=new function(){var n=function(n){"function"==typeof n&&n(!1)};return n.wait=function(){var r=Array.prototype.slice.call(arguments);if(r.length>0&&"function"==typeof r[r.length-1]){var t=r[r.length-1];t(!1)}return n},n.notify=function(r,t){return null!=t&&t(!1),n},n}};module.exports=grunseq;