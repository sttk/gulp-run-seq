"use strict";var gulp=require("gulp"),grunseq=new function(){function n(){}function r(n){for(var r=0;r<f.length;r++)if(f[r].runner===n)return f[r];return null}function t(n){for(var r=0;r<f.length;r++){var t=f[r];if(t.runner.seq.indexOf(n)>=0)return t}return null}function u(n){var r=f.indexOf(n);r>=0&&f.splice(r,1)}function e(n){return 0===Object.keys(n).length}function l(){var r=Array.prototype.slice.call(arguments),t=null;r.length>0&&"function"==typeof r[r.length-1]&&(t=r.pop());var u=new n,e=r,l={runner:u,tasks:e,running:{},callback:t};f.push(l),i(l)}function i(n){if(0===n.tasks.length)return u(n),void(null!=n.callback&&n.callback());var r=n.tasks.shift();Array.isArray(r)||(r=[r]);for(var e=[],l=0;l<r.length;l++){var i=r[l];null==t(i)&&(e.push(i),n.running[i]={})}gulp.start.apply(n.runner,e)}function a(n,t){var u=function(u){var l=r(n);null!=l&&t in l.running&&e(l.running[t])&&(delete l.running[t],null!=u&&u(),e(l.running)&&i(l))};return u.wait=function(){var e=r(n);if(null!=e){var l=Array.prototype.slice.call(arguments),i=!0;if(l.length>0&&"function"==typeof l[l.length-1]&&(i=l.pop()),t in e.running){for(var a=e.running[t],o=0;o<l.length;o++)a[l[o]]=i;return u}}},u.notify=function(l,a){var o=r(n);if(null!=o&&t in o.running){var f=null;return l in o.running[t]&&(f=o.running[t][l],delete o.running[t][l]),e(o.running[t])&&delete o.running[t],null!=a&&a(!0),"function"==typeof f&&f(!0),e(o.running)&&i(o),u}},u}function o(n){var r=t(n);return null!=r?new a(r.runner,n):g}this.start=l,this.ender=o;var f=[];n.prototype=gulp;var g=new function(){var n=function(n){null!=n&&n(!1)};return n.wait=function(){var n=Array.prototype.slice.call(arguments);if(n.length>0&&"function"==typeof n[n.length-1]){var r=n[n.length-1];r(!1)}},n.notify=function(n,r){null!=r&&r(!1)},n}};module.exports=grunseq;